/*! corner.js - v0.4.0 - 2013-10-04 */!function(){var a=(new Date).getTime()%1e9;window.SideTable=function(){this.name="__st"+(1e9*Math.random()>>>0)+(a++ +"__")},window.SideTable.prototype={set:function(a,b){Object.defineProperty(a,this.name,{value:b,writable:!0})},get:function(a){return Object.hasOwnProperty.call(a,this.name)?a[this.name]:void 0},"delete":function(a){this.set(a,void 0)}}}(),window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||function(){function a(a){x.push(a),w||(w=!0,t(c))}function b(a){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a}function c(){w=!1;var a=x;x=[],a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();d(a),c.length&&(a.callback_(c,a),b=!0)}),b&&c()}function d(a){a.nodes_.forEach(function(b){var c=s.get(b);c&&c.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function e(a,b){for(var c=a;c;c=c.parentNode){var d=s.get(c);if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.options;if(c===a||g.subtree){var h=b(g);h&&f.enqueue(h)}}}}function f(a){this.callback_=a,this.nodes_=[],this.records_=[],this.uid_=++y}function g(a,b){this.type=a,this.target=b,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function h(a){var b=new g(a.type,a.target);return b.addedNodes=a.addedNodes.slice(),b.removedNodes=a.removedNodes.slice(),b.previousSibling=a.previousSibling,b.nextSibling=a.nextSibling,b.attributeName=a.attributeName,b.attributeNamespace=a.attributeNamespace,b.oldValue=a.oldValue,b}function i(a,b){return z=new g(a,b)}function j(a){return A?A:(A=h(z),A.oldValue=a,A)}function k(){z=A=void 0}function l(a){return a===A||a===z}function m(a,b){return a===b?a:A&&l(a)?A:null}function n(a,b,c){this.observer=a,this.target=b,this.options=c,this.transientObservedNodes=[]}var o="DOMAttrModified",p="DOMCharacterDataModified",q="DOMNodeInserted",r="DOMNodeRemoved",s=new SideTable,t=window.SetImmediate||window.msSetImmediate;if(!t){var u=[],v=String(Math.random());window.addEventListener("message",function(a){if(a.data===v){var b=u;u=[],b.forEach(function(a){a()})}}),t=function(a){u.push(a),window.postMessage(v,"*")}}var w=!1,x=[],y=0;f.prototype={observe:function(a,c){if(a.jquery&&(a=a[0]),a=b(a),!c.childList&&!c.attributes&&!c.characterData||c.attributeOldValue&&!c.attributes||c.attributeFilter&&c.attributeFilter.length&&!c.attributes||c.characterDataOldValue&&!c.characterData)throw new SyntaxError;var d=s.get(a);d||s.set(a,d=[]);for(var e,f=0;f<d.length;f++)if(d[f].observer===this){e=d[f],e.removeListeners(),e.options=c;break}e||(e=new n(this,a,c),d.push(e),this.nodes_.push(a)),e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){for(var b=s.get(a),c=0;c<b.length;c++){var d=b[c];if(d.observer===this){d.removeListeners(),b.splice(c,1);break}}},this),this.records_=[]},takeRecords:function(){var a=this.records_;return this.records_=[],a}};var z,A;return n.prototype={enqueue:function(b){var c=this.observer.records_,d=c.length;if(c.length>0){var e=c[d-1],f=m(e,b);if(f)return c[d-1]=f,void 0}else a(this.observer);c[d]=b},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener(o,this,!0),b.characterData&&a.addEventListener(p,this,!0),b.childList&&a.addEventListener(q,this,!0),(b.childList||b.subtree)&&a.addEventListener(r,this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener(o,this,!0),b.characterData&&a.removeEventListener(p,this,!0),b.childList&&a.removeEventListener(q,this,!0),(b.childList||b.subtree)&&a.removeEventListener(r,this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a),this.transientObservedNodes.push(a);var b=s.get(a);b||s.set(a,b=[]),b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[],a.forEach(function(a){this.removeListeners_(a);for(var b=s.get(a),c=0;c<b.length;c++)if(b[c]===this){b.splice(c,1);break}},this)},handleEvent:function(a){switch(a.stopImmediatePropagation(),a.type){case o:var b=a.attrName,c=a.relatedNode.namespaceURI,d=a.target,f=new i("attributes",d);f.attributeName=b,f.attributeNamespace=c;var g=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;e(d,function(a){return!a.attributes||a.attributeFilter&&a.attributeFilter.length&&-1===a.attributeFilter.indexOf(b)&&-1===a.attributeFilter.indexOf(c)?void 0:a.attributeOldValue?j(g):f});break;case p:var d=a.target,f=i("characterData",d),g=a.prevValue;e(d,function(a){return a.characterData?a.characterDataOldValue?j(g):f:void 0});break;case r:this.addTransientObserver(a.target);case q:var h,l,d=a.relatedNode,m=a.target;a.type===q?(h=[m],l=[]):(h=[],l=[m]);var n=m.previousSibling,s=m.nextSibling,f=i("childList",d);f.addedNodes=h,f.removedNodes=l,f.previousSibling=n,f.nextSibling=s,e(d,function(a){return a.childList?f:void 0})}k()}},f}(),function(){!function(){var Directive,WeakMap,addedNodesDirectiveHandler,addedNodesHandler,config,directiveList,mutationRecordHandler,mutationRecordListHandler,observer,observerLaunched,removedNodesHandler,shootObserver,smartEval;return config={prefixes:["data-","directive-",""]},WeakMap=function(){var a,b;return a=[],b=[],Object.freeze({get:function(c,d){var e,f;return e=a.indexOf(c),f=b[e],-1===e?d:f},has:function(b){var c;return c=a.indexOf(b),-1!==c},set:function(c,d){var e;if(c!==Object(c))throw new TypeError("WeakMap key must not be a value type");return e=a.indexOf(c),-1===e?(a.push(c),b.push(d)):b[e]=d},"delete":function(c){var d;return d=a.indexOf(c),a=a.slice(0,d).concat(a.slice(d+1)),b=b.slice(0,d).concat(b.slice(d+1))},clear:function(){return a=[],b=[]}})},smartEval=function(content){var output;output=content;try{output=eval(content)}catch(_error){}try{output=eval("({"+content+"})")}catch(_error){}return output},directiveList=[],addedNodesDirectiveHandler=function(a,b){var c,d,e,f,g,h;for(d=0,f=a.length;f>d;d++)c=a[d],b.checkNode(c);for(h=[],e=0,g=a.length;g>e;e++)c=a[e],c.children&&h.push(addedNodesDirectiveHandler(c.children,b));return h},Directive=function(){function a(a,b,c,d){var e=this;this.directiveName=a,this.onLoad=b,this.onUnload=c,this.onAlter=d,this.name=this.directiveName.toLowerCase(),this.directiveName=this.directiveName.replace(/^./,function(a){return a.toUpperCase()}),console.log(this.directiveName),this.nodeMap=new WeakMap,this.aliases=config.prefixes.map(function(a){return a+e.name}),observerLaunched&&Array.prototype.forEach.call(document.querySelectorAll([this.aliases.map(function(a){return a}).join(" , "),this.aliases.map(function(a){return"."+a}).join(" , "),this.aliases.map(function(a){return"["+a+"]"}).join(" , ")].join(" , ")),function(a){return this.testNode(a)})}return a.prototype.getTagAttributesValue=function(a){var b,c,d,e,f;for(b={},f=a.attributes,d=0,e=f.length;e>d;d++)c=f[d],b[c.name]=smartEval(c.value);return b},a.prototype.getAttributeValue=function(a){return smartEval(a.value)},a.prototype.executeDirectiveAction=function(a,b,c){if(c)switch(b.type){case"attribute":if(b.attribute.value!==b.attributeValue)return b.attributeValue=b.attribute.value,c.call(b.scope,a,this.getAttributeValue(b.attribute));break;case"tag":return c.call(b.scope,a,this.getTagAttributesValue(a));case"class":return c.call(b.scope,a)}},a.prototype.directiveLoaded=function(a,b){return a["directive"+this.directiveName]=b.scope={},this.executeDirectiveAction(a,b,this.onLoad)},a.prototype.directiveAttributeAltered=function(a,b){return this.testNode(a)?this.executeDirectiveAction(a,b,this.onAlter):this.directiveUnloaded(a,b)},a.prototype.directiveUnloaded=function(a,b){return this.onUnload(b.scope,a)},a.prototype.testNode=function(a){var b,c,d,e,f;if(a.tagName&&a.attributes)for(c=(a.className||"").split(" ").filter(function(a){return a.length}).map(function(a){return a.toLowerCase()}),f=this.aliases,d=0,e=f.length;e>d;d++){if(b=f[d],-1!==c.indexOf(b))return{type:"class",className:b};if(a.attributes.getNamedItem(b))return{type:"attribute",attributeName:b,attribute:a.attributes.getNamedItem(b)};if(a.tagName.toLowerCase()===b)return{type:"tag",tagName:b,tag:a}}},a.prototype.registerClass=function(a,b){var c=this;return b.observer=new MutationObserver(function(){return c.testNode(a)?void 0:c.directiveUnloaded(a,b)}),b.observer.observe(a,{attributes:!0}),this.directiveLoaded(a,b)},a.prototype.registerAttribute=function(a,b){var c=this;return b.observer=new MutationObserver(function(){return c.directiveAttributeAltered(a,b)}),b.observer.observe(a,{attributes:!0}),this.directiveLoaded(a,b)},a.prototype.registerTag=function(a,b){var c=this;return b.observer=new MutationObserver(function(){return c.directiveAttributeAltered(a,b)}),b.observer.observe(a,{attributes:!0}),this.directiveLoaded(a,b)},a.prototype.checkNode=function(a){var b;if(!this.nodeMap.has(a)&&(b=this.testNode(a)))switch(this.nodeMap.set(a,b),b.type){case"tag":return this.registerTag(a,b);case"attribute":return this.registerAttribute(a,b);case"class":return this.registerClass(a,b)}},a.prototype.checkRemovingNode=function(a){var b;return(b=this.nodeMap.get(a))?this.directiveUnloaded(a,b):void 0},a}(),addedNodesHandler=function(a){var b,c,d,e,f,g,h,i,j;for(d=0,g=a.length;g>d;d++)for(c=a[d],e=0,h=directiveList.length;h>e;e++)b=directiveList[e],b.checkNode(c);for(j=[],f=0,i=a.length;i>f;f++)c=a[f],c.children&&j.push(addedNodesHandler(c.children));return j},removedNodesHandler=function(a){var b,c,d,e,f,g,h,i,j;for(d=0,g=a.length;g>d;d++)for(c=a[d],e=0,h=directiveList.length;h>e;e++)b=directiveList[e],b.checkRemovingNode(c);for(j=[],f=0,i=a.length;i>f;f++)c=a[f],c.children&&j.push(removedNodesHandler(c.children));return j},mutationRecordHandler=function(a){switch(a.type){case"childList":return addedNodesHandler(a.addedNodes),removedNodesHandler(a.removedNodes)}},mutationRecordListHandler=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(mutationRecordHandler(b));return e},observer=new MutationObserver(mutationRecordListHandler),observerLaunched=!1,shootObserver=function(){return mutationRecordListHandler([{addedNodes:[document.body],removedNodes:[],target:document.body}]),observer.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),observerLaunched=!0},"complete"===document.readyState?shootObserver():document.addEventListener("DOMContentLoaded",shootObserver.bind(document.body),!1),window.directive=function(a,b){return b instanceof Function&&(b={load:b}),directiveList.push(new Directive(a,b.load||b.alter,b.unload,b.alter)),void 0}}()}.call(this);