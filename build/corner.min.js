/*! corner.js - v0.3.0 - 2013-07-25 */!function(){var a=(new Date).getTime()%1e9;window.SideTable=function(){this.name="__st"+(1e9*Math.random()>>>0)+(a++ +"__")},window.SideTable.prototype={set:function(a,b){Object.defineProperty(a,this.name,{value:b,writable:!0})},get:function(a){return Object.hasOwnProperty.call(a,this.name)?a[this.name]:void 0},"delete":function(a){this.set(a,void 0)}}}(),window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||function(){function a(a){x.push(a),w||(w=!0,t(c))}function b(a){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a}function c(){w=!1;var a=x;x=[],a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();d(a),c.length&&(a.callback_(c,a),b=!0)}),b&&c()}function d(a){a.nodes_.forEach(function(b){var c=s.get(b);c&&c.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function e(a,b){for(var c=a;c;c=c.parentNode){var d=s.get(c);if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.options;if(c===a||g.subtree){var h=b(g);h&&f.enqueue(h)}}}}function f(a){this.callback_=a,this.nodes_=[],this.records_=[],this.uid_=++y}function g(a,b){this.type=a,this.target=b,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function h(a){var b=new g(a.type,a.target);return b.addedNodes=a.addedNodes.slice(),b.removedNodes=a.removedNodes.slice(),b.previousSibling=a.previousSibling,b.nextSibling=a.nextSibling,b.attributeName=a.attributeName,b.attributeNamespace=a.attributeNamespace,b.oldValue=a.oldValue,b}function i(a,b){return z=new g(a,b)}function j(a){return A?A:(A=h(z),A.oldValue=a,A)}function k(){z=A=void 0}function l(a){return a===A||a===z}function m(a,b){return a===b?a:A&&l(a)?A:null}function n(a,b,c){this.observer=a,this.target=b,this.options=c,this.transientObservedNodes=[]}var o="DOMAttrModified",p="DOMCharacterDataModified",q="DOMNodeInserted",r="DOMNodeRemoved",s=new SideTable,t=window.SetImmediate||window.msSetImmediate;if(!t){var u=[],v=String(Math.random());window.addEventListener("message",function(a){if(a.data===v){var b=u;u=[],b.forEach(function(a){a()})}}),t=function(a){u.push(a),window.postMessage(v,"*")}}var w=!1,x=[],y=0;f.prototype={observe:function(a,c){if(a.jquery&&(a=a[0]),a=b(a),!c.childList&&!c.attributes&&!c.characterData||c.attributeOldValue&&!c.attributes||c.attributeFilter&&c.attributeFilter.length&&!c.attributes||c.characterDataOldValue&&!c.characterData)throw new SyntaxError;var d=s.get(a);d||s.set(a,d=[]);for(var e,f=0;f<d.length;f++)if(d[f].observer===this){e=d[f],e.removeListeners(),e.options=c;break}e||(e=new n(this,a,c),d.push(e),this.nodes_.push(a)),e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){for(var b=s.get(a),c=0;c<b.length;c++){var d=b[c];if(d.observer===this){d.removeListeners(),b.splice(c,1);break}}},this),this.records_=[]},takeRecords:function(){var a=this.records_;return this.records_=[],a}};var z,A;return n.prototype={enqueue:function(b){var c=this.observer.records_,d=c.length;if(c.length>0){var e=c[d-1],f=m(e,b);if(f)return c[d-1]=f,void 0}else a(this.observer);c[d]=b},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener(o,this,!0),b.characterData&&a.addEventListener(p,this,!0),b.childList&&a.addEventListener(q,this,!0),(b.childList||b.subtree)&&a.addEventListener(r,this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener(o,this,!0),b.characterData&&a.removeEventListener(p,this,!0),b.childList&&a.removeEventListener(q,this,!0),(b.childList||b.subtree)&&a.removeEventListener(r,this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a),this.transientObservedNodes.push(a);var b=s.get(a);b||s.set(a,b=[]),b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[],a.forEach(function(a){this.removeListeners_(a);for(var b=s.get(a),c=0;c<b.length;c++)if(b[c]===this){b.splice(c,1);break}},this)},handleEvent:function(a){switch(a.stopImmediatePropagation(),a.type){case o:var b=a.attrName,c=a.relatedNode.namespaceURI,d=a.target,f=new i("attributes",d);f.attributeName=b,f.attributeNamespace=c;var g=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;e(d,function(a){return!a.attributes||a.attributeFilter&&a.attributeFilter.length&&-1===a.attributeFilter.indexOf(b)&&-1===a.attributeFilter.indexOf(c)?void 0:a.attributeOldValue?j(g):f});break;case p:var d=a.target,f=i("characterData",d),g=a.prevValue;e(d,function(a){return a.characterData?a.characterDataOldValue?j(g):f:void 0});break;case r:this.addTransientObserver(a.target);case q:var h,l,d=a.relatedNode,m=a.target;a.type===q?(h=[m],l=[]):(h=[],l=[m]);var n=m.previousSibling,s=m.nextSibling,f=i("childList",d);f.addedNodes=h,f.removedNodes=l,f.previousSibling=n,f.nextSibling=s,e(d,function(a){return a.childList?f:void 0})}k()}},f}(),function(){var __hasProp={}.hasOwnProperty;Object.defineProperty(Array.prototype,"flatten",{get:function(){return function(){var a,b,c,d;for(a=[],c=0,d=this.length;d>c;c++)b=this[c],null!=b&&(a=a.concat(b.flatten?b.flatten():b));return a}}}),window.directive=function(){var apply_directives_in_subtree,config,create_directive,directive_processor,directives,node_altered,node_loaded,node_unloaded,observer,observer_function,parse_node_attrs,put_in_queue,resolve_directives_in_attributes,resolve_directives_in_classes,resolve_directives_in_tag,shoot_observer,smart_eval;return config={prefixes:["data-","directive-",""],ignored_attributes:["class","href"]},smart_eval=function(content){var output;if(output=content,"string"==typeof output){try{output=eval(content)}catch(_error){}try{output=eval("({"+content+"})")}catch(_error){}}return output},put_in_queue=function(a){return setTimeout(a,0)},apply_directives_in_subtree=function(a,b){var c,d,e,f;if(b.children)for(f=b.children,d=0,e=f.length;e>d;d++)c=f[d],apply_directives_in_subtree(a,c);switch(a){case"load":return node_loaded(b);case"unload":return node_unloaded(b)}},parse_node_attrs=function(a){var b,c,d,e,f;if(b={},a.attributes)for(f=a.attributes,d=0,e=f.length;e>d;d++)c=f[d],b[c.name]=smart_eval(c.value);return b},resolve_directives_in_classes=function(a){var b,c,d,e,f,g,h,i;for(h=a.classList||a.className&&a.className.split(" ")||[],i=[],f=0,g=h.length;g>f;f++)b=h[f],i.push(function(){var a;a=[];for(d in directives)__hasProp.call(directives,d)&&(c=directives[d],a.push(function(){var a,f,g,h;for(g=config.prefixes,h=[],a=0,f=g.length;f>a;a++)e=g[a],b.toLowerCase()===e+d&&h.push({directive:c,type:"class"});return h}()));return a}());return i},resolve_directives_in_attributes=function(a){var b,c,d,e,f,g,h,i;for(h=a.attributes||[],i=[],f=0,g=h.length;g>f;f++)b=h[f],-1===config.ignored_attributes.indexOf(b.name)&&i.push(function(){var a;a=[];for(d in directives)__hasProp.call(directives,d)&&(c=directives[d],a.push(function(){var a,f,g,h;for(g=config.prefixes,h=[],a=0,f=g.length;f>a;a++)e=g[a],b.name.toLowerCase()===e+d&&h.push({directive:c,attribute_name:b.name.toLowerCase(),attribute:b.value,type:"attribute"});return h}()));return a}());return i},resolve_directives_in_tag=function(a){var b,c,d,e;if(null==a.tagName)return[];e=[];for(c in directives)__hasProp.call(directives,c)&&(b=directives[c],e.push(function(){var e,f,g,h;for(g=config.prefixes,h=[],e=0,f=g.length;f>e;e++)d=g[e],a.tagName.toLowerCase()===d+c&&h.push({directive:b,type:"tag",attribute_name:a.tagName,attribute:parse_node_attrs(a)});return h}()));return e},node_loaded=function(a){var b,c,d,e,f,g,h,i,j;for(a.directives||(a.directives={}),a.directive_aliases||(a.directive_aliases={}),e=[].concat(resolve_directives_in_classes(a)).concat(resolve_directives_in_attributes(a)).concat(resolve_directives_in_tag(a)).flatten(),g=0,h=e.length;h>g;g++)d=e[g],a.directives[d.directive.name]=d,d.attribute_name&&(a.directive_aliases[d.attribute_name]=d);i=a.directives,j=[];for(c in i)f=i[c],null==a[c]&&(a[c]={directive:f,node:a},b=f.directive,b.load?j.push(put_in_queue(b.load.bind(a[b.name],a,smart_eval(f.attribute)))):j.push(void 0));return j},node_unloaded=function(a){var b,c,d,e;if(a.directives){d=a.directives,e=[];for(b in d)c=d[b],null!=c&&null!=directives[b].unload&&e.push(put_in_queue(directives[b].unload.bind(a[b],a,smart_eval(c.attribute))));return e}},node_altered=function(a,b){var c;return a.directive_aliases&&(a.directives[a.tagName.toLowerCase()]&&(c=a.directive_aliases[a.tagName.toLowerCase()],put_in_queue(c.directive.alter.bind(a[c.directive.name],a,parse_node_attrs(a)))),c=a.directive_aliases[b.attributeName],c&&c.attribute&&c.directive.alter)?put_in_queue(c.directive.alter.bind(a[c.directive.name],a,smart_eval(a.attributes.getNamedItem(b.attributeName).value))):void 0},create_directive=function(a,b){return b instanceof Function&&(b={load:b}),null==b.load&&(b.load=b.alter),b.name=a.toLowerCase(),directives[b.name]=b,"complete"===document.readyState?node_loaded(document.body):void 0},observer_function=function(a){var b,c,d,e,f,g,h,i,j;for(j=[],e=0,g=a.length;g>e;e++)switch(c=a[e],c.type){case"attributes":node_altered(c.target,c),j.push(node_loaded(c.target));break;default:for(i=c.addedNodes,f=0,h=i.length;h>f;f++)b=i[f],apply_directives_in_subtree("load",b);j.push(function(){var a,b,e,f;for(e=c.removedNodes,f=[],a=0,b=e.length;b>a;a++)d=e[a],f.push(apply_directives_in_subtree("unload",d));return f}())}return j},directives={},observer=new MutationObserver(observer_function),directive_processor=function(a,b){if(a.constructor!==String||!(b instanceof Object||b instanceof Function))throw new TypeError("incorrect directive format");if(directives[a.toLowerCase()])throw"trying to register already registered directive "+a;return create_directive(a,b)},shoot_observer=function(){return observer_function([{addedNodes:[document.body],removedNodes:[],target:document.body}]),observer.observe(document.body,{attributes:!0,childList:!0,subtree:!0})},"complete"===document.readyState?shoot_observer():document.addEventListener("DOMContentLoaded",shoot_observer,!1),directive_processor}()}.call(this);