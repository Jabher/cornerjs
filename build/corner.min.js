/*! corner.js - v0.9.3 - 2017-03-17 */"undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty,t=Date.now()%1e9,r=function(){this.name="__st"+(1e9*Math.random()>>>0)+(t++ +"__")};r.prototype={set:function(t,r){var i=t[this.name];return i&&i[0]===t?i[1]=r:e(t,this.name,{value:[t,r],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},"delete":function(e){var t=e[this.name];return t&&t[0]===e?(t[0]=t[1]=void 0,!0):!1},has:function(e){var t=e[this.name];return t?t[0]===e:!1}},window.WeakMap=r}(),function(e){function t(e){N.push(e),g||(g=!0,m(i))}function r(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function i(){g=!1;var e=N;N=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var r=e.takeRecords();a(e),r.length&&(e.callback_(r,e),t=!0)}),t&&i()}function a(e){e.nodes_.forEach(function(t){var r=b.get(t);r&&r.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function n(e,t){for(var r=e;r;r=r.parentNode){var i=b.get(r);if(i)for(var a=0;a<i.length;a++){var n=i[a],o=n.options;if(r===e||o.subtree){var s=t(o);s&&n.enqueue(s)}}}}function o(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++w}function s(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function d(e){var t=new s(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function u(e,t){return y=new s(e,t)}function c(e){return O?O:(O=d(y),O.oldValue=e,O)}function l(){y=O=void 0}function v(e){return e===O||e===y}function f(e,t){return e===t?e:O&&v(e)?O:null}function h(e,t,r){this.observer=e,this.target=t,this.options=r,this.transientObservedNodes=[]}if(!e.JsMutationObserver){var m,b=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var p=[],_=String(Math.random());window.addEventListener("message",function(e){if(e.data===_){var t=p;p=[],t.forEach(function(e){e()})}}),m=function(e){p.push(e),window.postMessage(_,"*")}}var g=!1,N=[],w=0;o.prototype={observe:function(e,t){if(e=r(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var i=b.get(e);i||b.set(e,i=[]);for(var a,n=0;n<i.length;n++)if(i[n].observer===this){a=i[n],a.removeListeners(),a.options=t;break}a||(a=new h(this,e,t),i.push(a),this.nodes_.push(e)),a.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=b.get(e),r=0;r<t.length;r++){var i=t[r];if(i.observer===this){i.removeListeners(),t.splice(r,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var y,O;h.prototype={enqueue:function(e){var r=this.observer.records_,i=r.length;if(r.length>0){var a=r[i-1],n=f(a,e);if(n)return void(r[i-1]=n)}else t(this.observer);r[i]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=b.get(e);t||b.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=b.get(e),r=0;r<t.length;r++)if(t[r]===this){t.splice(r,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,r=e.relatedNode.namespaceURI,i=e.target,a=new u("attributes",i);a.attributeName=t,a.attributeNamespace=r;var o=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;n(i,function(e){return!e.attributes||e.attributeFilter&&e.attributeFilter.length&&-1===e.attributeFilter.indexOf(t)&&-1===e.attributeFilter.indexOf(r)?void 0:e.attributeOldValue?c(o):a});break;case"DOMCharacterDataModified":var i=e.target,a=u("characterData",i),o=e.prevValue;n(i,function(e){return e.characterData?e.characterDataOldValue?c(o):a:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var s,d,v=e.target;"DOMNodeInserted"===e.type?(s=[v],d=[]):(s=[],d=[v]);var f=v.previousSibling,h=v.nextSibling,a=u("childList",e.target.parentNode);a.addedNodes=s,a.removedNodes=d,a.previousSibling=f,a.nextSibling=h,n(e.relatedNode,function(e){return e.childList?a:void 0})}l()}},e.JsMutationObserver=o,e.MutationObserver||(e.MutationObserver=o,o._isPolyfilled=!0)}}(self),function(global){function itar(e,t){e&&e.length&&Array.prototype.forEach.call(e,t)}function wrap_cb(e){return e?function(){try{e.apply(this,arguments)}catch(t){console.error(t,{arguments:arguments}),setTimeout(function(){throw t},0)}}:void 0}function directive(e,t){var r=e.toLowerCase();if(r in directive_map)throw new Error("directive already registered");t instanceof Function&&(t={load:t}),directive_list.push(directive_map[r]={name:r,originalName:e,onload:wrap_cb(t.load||t.alter),onunload:wrap_cb(t.unload),onalter:wrap_cb(t.alter)}),document.body&&itar(document.body.querySelectorAll([r,", [",r,"], .",r].join("")),element_loaded)}function eval_attribute(element,attributeName){if(!attributeName){var attrs={};return itar(element.attributes,function(e){attrs[e.name]=eval_attribute(element,e.name)}),attrs}var attribute=element.attributes[attributeName];try{return eval("({"+attribute.value+"})")}catch(e){try{return eval("("+attribute.value+")")}catch(e){return attribute&&attribute.value}}}function corner_init(){element_loaded(document.body),new MutationObserver(function(e){itar(e,function(e){switch(e.type){case"childList":itar(e.addedNodes,element_loaded_wrapper),itar(e.removedNodes,element_removed_wrapper);break;case"attributes":var t=e.target;if("class"===e.attributeName){var r=(e.oldValue||"").toLowerCase().split(" "),i=(t.className||"").toLowerCase().split(" ");itar(r.filter(function(e){return-1===i.indexOf(e)}),function(e){directive_map[e]&&directive_removed(directive_map[e],t)}),itar(i.filter(function(e){return-1===r.indexOf(e)}),function(e){directive_map[e]&&directive_loaded(directive_map[e],t,"class")})}else if(directive_map[e.attributeName]){var a=directive_map[e.attributeName];t.attributes[e.attributeName]?null!==e.oldValue?directive_altered(a,t,"attribute"):directive_loaded(a,t,"attribute"):directive_removed(a,t)}t[key]&&t[key].$&&directive_altered(t[key].$.directive,t,"tag")}})}).observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0})}function element_loaded_wrapper(e){element_loaded(e),itar(e.children,element_loaded_wrapper)}function element_loaded(e){function t(t){return function(r){directive_loaded(r,e,t)}}if(e.tagName&&e.parentElement){for(var r=e.parentElement;r.parentElement;)r=r.parentElement;if(r===document.documentElement){var i=[],a=[],n=[],o=(e.className||"").toLowerCase().split(" ");directive_list.forEach(function(t){e.tagName.toLowerCase()===t.name&&i.push(t),t.name in e.attributes&&n.push(t),-1!==o.indexOf(t.name)&&a.push(t)}),i.length+a.length+n.length&&(i.forEach(t("tag")),n.forEach(t("attribute")),a.forEach(t("class")))}}}function register_directive(e,t,r){var i=t[key][e.name];return i||(i=t[key][e.name]={type:r,directive:e,scope:{}}),"tag"===r?i.argument=eval_attribute(t):"attribute"===r&&(i.argument=eval_attribute(t,e.name)),"tag"===r&&Object.defineProperty(t[key],"$",{value:i}),i}function directive_loaded(e,t,r){if(t[key]||Object.defineProperty(t,key,{value:{}}),!t[key][e.name]){var i=register_directive(e,t,r);e.onload&&e.onload.call(i.scope,t,i.argument)}}function directive_altered(e,t,r){if(e.onalter){var i=register_directive(e,t,r);e.onalter.call(i.scope,t,i.argument)}}function element_removed_wrapper(e){itar(e.children,element_removed_wrapper),element_removed(e)}function element_removed(e){e[key]&&Object.keys(e[key]).forEach(function(t){var r=directive_map[t],i=register_directive(r,e);r.onunload&&r.onunload.call(i.scope,e,i.argument)})}function directive_removed(e,t){var r=register_directive(e,t);t[key]&&t[key][e.name]&&(e.onunload&&e.onunload.call(r.scope,t,r.argument),delete t[key][e.name])}var directive_map={},directive_list=[],key="__directives__";document.addEventListener("DOMContentLoaded",corner_init),"loading"!==document.readyState&&corner_init(),"module"in global?global.module.exports=directive:"exports"in global?global.exports=directive:global.directive=directive}((0,eval)("this"));
