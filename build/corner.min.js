/*! corner.js - v0.1.0 - 2013-06-07 */Array.prototype.indexOf=Array.prototype.indexOf||function(a){"use strict";if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!==d&&1/0!==d&&d!==-1/0&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1},Array.prototype.forEach=Array.prototype.forEach||function(a,b){for(var c=0,d=this.length;d>c;++c)a.call(b,this[c],c,this)},Array.prototype.filter=Array.prototype.filter||function(a){"use strict";if(null==this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments[1],f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d},"undefined"!=typeof WeakMap&&navigator.userAgent.indexOf("Firefox/")<0?window.SideTable=WeakMap:function(){var a=Object.defineProperty,b=Object.hasOwnProperty,c=(new Date).getTime()%1e9;window.SideTable=function(){this.name="__st"+(1e9*Math.random()>>>0)+(c++ +"__")},window.SideTable.prototype={set:function(b,c){a(b,this.name,{value:c,writable:!0})},get:function(a){return b.call(a,this.name)?a[this.name]:void 0},"delete":function(a){this.set(a,void 0)}}}(),window.MutationObserver=window.MutationObserver||window.WebKitMutationObserver,window.MutationObserver||function(){function a(a){t.push(a),s||(s=!0,p(c))}function b(a){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a}function c(){s=!1;var a=t;t=[],a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();d(a),c.length&&(a.callback_(c,a),b=!0)}),b&&c()}function d(a){a.nodes_.forEach(function(b){var c=o.get(b);c&&c.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function e(a,b){for(var c=a;c;c=c.parentNode){var d=o.get(c);if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.options;if(c===a||g.subtree){var h=b(g);h&&f.enqueue(h)}}}}function f(a){this.callback_=a,this.nodes_=[],this.records_=[],this.uid_=++u}function g(a,b){this.type=a,this.target=b,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function h(a){var b=new g(a.type,a.target);return b.addedNodes=a.addedNodes.slice(),b.removedNodes=a.removedNodes.slice(),b.previousSibling=a.previousSibling,b.nextSibling=a.nextSibling,b.attributeName=a.attributeName,b.attributeNamespace=a.attributeNamespace,b.oldValue=a.oldValue,b}function i(a,b){return v=new g(a,b)}function j(a){return w?w:(w=h(v),w.oldValue=a,w)}function k(){v=w=void 0}function l(a){return a===w||a===v}function m(a,b){return a===b?a:w&&l(a)?w:null}function n(a,b,c){this.observer=a,this.target=b,this.options=c,this.transientObservedNodes=[]}var o=new SideTable,p=window.SetImmediate||window.msSetImmediate;if(!p){var q=[],r=String(Math.random());window.addEventListener("message",function(a){if(a.data===r){var b=q;q=[],b.forEach(function(a){a()})}}),p=function(a){q.push(a),window.postMessage(r,"*")}}var s=!1,t=[],u=0;f.prototype={observe:function(a,c){if(a.jquery&&(a=a[0]),a=b(a),!c.childList&&!c.attributes&&!c.characterData||c.attributeOldValue&&!c.attributes||c.attributeFilter&&c.attributeFilter.length&&!c.attributes||c.characterDataOldValue&&!c.characterData)throw new SyntaxError;var d=o.get(a);d||o.set(a,d=[]);for(var e,f=0;f<d.length;f++)if(d[f].observer===this){e=d[f],e.removeListeners(),e.options=c;break}e||(e=new n(this,a,c),d.push(e),this.nodes_.push(a)),e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){for(var b=o.get(a),c=0;c<b.length;c++){var d=b[c];if(d.observer===this){d.removeListeners(),b.splice(c,1);break}}},this),this.records_=[]},takeRecords:function(){var a=this.records_;return this.records_=[],a}};var v,w;n.prototype={enqueue:function(b){var c=this.observer.records_,d=c.length;if(c.length>0){var e=c[d-1],f=m(e,b);if(f)return c[d-1]=f,void 0}else a(this.observer);c[d]=b},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0),b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0),b.childList&&a.addEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0),b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0),b.childList&&a.removeEventListener("DOMNodeInserted",this,!0),(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a),this.transientObservedNodes.push(a);var b=o.get(a);b||o.set(a,b=[]),b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[],a.forEach(function(a){this.removeListeners_(a);for(var b=o.get(a),c=0;c<b.length;c++)if(b[c]===this){b.splice(c,1);break}},this)},handleEvent:function(a){switch(a.stopImmediatePropagation(),a.type){case"DOMAttrModified":var b=a.attrName,c=a.relatedNode.namespaceURI,d=a.target,f=new i("attributes",d);f.attributeName=b,f.attributeNamespace=c;var g=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;e(d,function(a){return!a.attributes||a.attributeFilter&&a.attributeFilter.length&&-1===a.attributeFilter.indexOf(b)&&-1===a.attributeFilter.indexOf(c)?void 0:a.attributeOldValue?j(g):f});break;case"DOMCharacterDataModified":var d=a.target,f=i("characterData",d),g=a.prevValue;e(d,function(a){return a.characterData?a.characterDataOldValue?j(g):f:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(a.target);case"DOMNodeInserted":var h,l,d=a.relatedNode,m=a.target;"DOMNodeInserted"===a.type?(h=[m],l=[]):(h=[],l=[m]);var n=m.previousSibling,o=m.nextSibling,f=i("childList",d);f.addedNodes=h,f.removedNodes=l,f.previousSibling=n,f.nextSibling=o,e(d,function(a){return a.childList?f:void 0})}k()}},window.MutationObserver=f}(),window.directive=function(){function directive_processor(a,b){if("string"!=typeof a||-1===["object","function"].indexOf(typeof b))throw"incorrect directive call format";if(directives[a]&&!config.allow_override)throw"trying to register already registred directive "+a;create_directive(a,b)}function create_directive(a,b){function c(a,b){for(var c in b)a[c]=a[c]||b[c];return a}return a=a.toLowerCase(),"function"==typeof b&&(b={load:b}),b=c(b,common_directive),b.name=a,directives[a]=b,b}function observer_function(a){a.forEach(function(a){for(var b in directives)switch(a.type){case"attributes":var c=a.target,d=a.attributeName,e=d;if(config.prefixes.forEach(function(a){e=e.replace(a+"-","")}),e==b){var f=c.attributes.getNamedItem(d);directives[b].alter.call(c,f?f.value:void 0)}break;default:a.addedNodes.forEach(function(a){apply_directive_in_subtree(b,"load",a)}),a.removedNodes.forEach(function(a){apply_directive_in_subtree(b,"unload",a)})}})}function apply_directive_in_subtree(directive_name,action,node){node.children&&node.children.forEach&&node.children.forEach(function(a){apply_directive_in_subtree(directive_name,action,a)});var has_directive=!1,attribute_value,aliases=[directive_name];if(config.prefixes.forEach(function(a){aliases.push(a+"-"+directive_name)}),aliases.forEach(function(a){(node.classList&&node.classList.forEach||node.className)&&(node.classList||node.className&&node.className.split(" ")).forEach(function(b){b.toLowerCase()===a&&(has_directive=!0)}),node.attributes&&node.attributes.forEach&&node.attributes.forEach(function(b){"class"!==b.name&&"href"!==b.name&&b.name.toLowerCase()===a&&(has_directive=!0,attribute_value=b.textContent)})}),has_directive){var attribute;if(attribute_value)try{attribute=eval("({"+attribute_value+"})")}catch(exception){try{attribute=eval(attribute_value)}catch(exception){attribute=attribute_value}}!function(a,b,c,d){function e(a,b,c){c?a.innerHTML=b:a.insertAdjacentHTML("beforeend",b)}switch(b){case"load":directives[a].template_url?function(f){f.onreadystatechange=function(){if(4==f.readyState){if(200!=f.status)throw directives[a].template_url+' is not reachable. Cancelling "'+a+'" directive call';e(c,f.responseText,directives[a].replace),directives[a][b].call(c,d)}},f.open("GET",directives[a].template_url,!0),f.send()}(new XMLHttpRequest):(directives[a].template&&e(c,directives[a].template,directives[a].replace),directives[a][b].call(c,d));break;case"unload":directives[a][b].call(c,d)}}(directive_name,action,node,attribute)}}if(!window.XMLHttpRequest)throw"XMLHttpRequest not found";if(!window.MutationObserver)throw"MutationObserver (or polyfill) not found";if(!Array.prototype.indexOf&&!Array.prototype.forEach&&!Array.prototype.filter)throw"Array EC5 extensions (or polyfills) not found";NodeList.prototype.forEach=NodeList.prototype.forEach||Array.prototype.forEach,HTMLCollection.prototype.forEach=HTMLCollection.prototype.forEach||Array.prototype.forEach,DOMTokenList.prototype.forEach=DOMTokenList.prototype.forEach||Array.prototype.forEach,NamedNodeMap.prototype.forEach=NamedNodeMap.prototype.forEach||Array.prototype.forEach;var config={prefixes:["data","directive"],allow_override:!1},common_directive={load:function(){},ready:function(){},alter:function(){},unload:function(){},template:void 0,template_url:void 0,replace:!1},directives={},observer=new MutationObserver(observer_function);return document.body?observer.observe(document.body,{attributes:!0,childList:!0,subtree:!0}):function(a){document.addEventListener&&document.addEventListener("DOMContentLoaded",a,!1),document.attachEvent&&document.attachEvent("onreadystatechange",a)}(function(){observer_function([{addedNodes:[document.body],removedNodes:[],target:document.body}]),observer.observe(document.body,{attributes:!0,childList:!0,subtree:!0})}),directive_processor.config=config,directive_processor}();